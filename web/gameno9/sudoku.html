<!DOCTYPE html>
<html>
<head>
  <title>State Sudoku</title>
</head>

<body style="
  background:#111;
  color:#0f0;
  font-family:Courier, monospace;
  font-size:12px;
  text-align:center;
  margin:6px;
">

<h3 style="margin:2px 0;">STATE SUDOKU</h3>
<p style="margin:2px 0;">FILL WITHOUT ERRORS</p>
<p style="font-size:10px;">Tap cell to change number (1–4)</p>

<table id="board" align="center" cellspacing="2"></table>

<p id="msg" style="margin:4px 0;"></p>

<button class="ui" onclick="resetGame()">RESET</button>
<button class="ui" onclick="window.location.href='index.html'">◀ Exit</button>


<script>
// SOLUTION
var solution = [
  1,2,3,4,
  3,4,1,2,
  2,1,4,3,
  4,3,2,1
];

// PUZZLE (0 = empty)
var puzzle = [
  1,0,0,4,
  0,4,0,0,
  0,0,4,0,
  4,0,0,1
];

var board = [];
var fixed = [];

function init() {
  board = puzzle.slice();
  fixed = [];
  document.getElementById("msg").textContent = "";

  for (var i = 0; i < 16; i++) {
    fixed[i] = puzzle[i] !== 0;
  }
  draw();
}

function draw() {
  var html = "";
  for (var y = 0; y < 4; y++) {
    html += "<tr>";
    for (var x = 0; x < 4; x++) {
      var i = y * 4 + x;
      var val = board[i] === 0 ? "" : board[i];
      var cls = fixed[i] ? "fixed" : "cell";
      html += "<td><button class='" + cls +
        "' onclick='tap(" + i + ")'>" +
        val + "</button></td>";
    }
    html += "</tr>";
  }
  document.getElementById("board").innerHTML = html;
}

function tap(i) {
  if (fixed[i]) return;

  board[i]++;
  if (board[i] > 4) board[i] = 0;

  if (board[i] !== 0 && board[i] !== solution[i]) {
    document.getElementById("msg").textContent =
      "ERROR. STATE DISAPPROVES.";
  } else {
    document.getElementById("msg").textContent = "";
  }

  if (checkWin()) {
    document.getElementById("msg").textContent =
      "PUZZLE COMPLETE. GLORY TO THE STATE.";
  }

  draw();
}

function checkWin() {
  for (var i = 0; i < 16; i++) {
    if (board[i] !== solution[i]) return false;
  }
  return true;
}

function resetGame() {
  init();
}

init();
</script>

<style>
button {
  width:22px;
  height:22px;
  line-height:22px;
  font-size:12px;
  font-family:Courier, monospace;
  font-weight:bold;
  padding:0;
  margin:0;
  border:1px solid #0f0;
  background:#000;
  color:#0f0;
}

.fixed {
  background:#030;
}

.cell {
  background:#000;
}

.ui {
  width:60px;
  height:20px;
  line-height:20px;

  font-size:11px;
  font-family:Courier, monospace;
  font-weight:bold;

  padding:0;
  margin:2px;

  border:1px solid #0f0;
  background:#000;
  color:#0f0;

  text-align:center;
}

</style>

</body>
</html>
